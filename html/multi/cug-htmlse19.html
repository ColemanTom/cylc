<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>The Cylc Lockserver</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,fn-in,2,next --> 
<meta name="src" content="cug-html.tex"> 
<meta name="date" content="2013-12-04 13:38:00"> 
<link rel="stylesheet" type="text/css" href="cug-html.css"> 
</head><body 
>
   <!--l. 6115--><div class="crosslinks"><p class="noindent">[<a 
href="cug-htmlse20.html" >next</a>] [<a 
href="cug-htmlse18.html" >prev</a>] [<a 
href="cug-htmlse18.html#tailcug-htmlse18.html" >prev-tail</a>] [<a 
href="#tailcug-htmlse19.html">tail</a>] [<a 
href="cug-html.html#cug-htmlse19.html" >up</a>] </p></div>
   <h3 class="sectionHead"><span class="titlemark">D   </span> <a 
 id="x20-470000D"></a>The Cylc Lockserver</h3>
   <div class="sectionTOCS">
   </div>
<!--l. 6118--><p class="indent" >   Each cylc user can optionally run his/her own lockserver to prevent accidental invocation of multiple instances of
the same suite or task at the same time. The suite and task locks brokered by the lockserver are analogous to
traditional lock files, but they work across a network, even for distributed suites containing tasks that start
executing on one host and finish on another.
<!--l. 6125--><p class="indent" >   Accidental invocation of multiple instances of the same suite or task at the same time can have serious
consequences, so use of the lockserver should be considered for important operational suites, but it may be
considered an unnecessary complication for general less critical usage, so it is currently disabled by
default.
<!--l. 6131--><p class="indent" >   To enable the lockserver:  <!--l. 6133--><div class="lstlisting">
<span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x20-470001r1"></a></span><span 
class="pcrr7t-">use</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">lockserver</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">True</span>


   </div>
<!--l. 6137--><p class="indent" >   The suite will now abort at start-up if it cannot connect to the lockserver. To start your lockserver daemon,
<!--l. 6140--><div class="lstlisting">
<span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x20-470002r1"></a></span><span 
class="pcrr7t-">shell</span><span 
class="pcrr8c-">$</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">cylc</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">lockserver</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">start</span>


   </div>
<!--l. 6144--><p class="indent" >   To check that it is running, <!--l. 6145--><div class="lstlisting">
<span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x20-470003r1"></a></span><span 
class="pcrr7t-">shell</span><span 
class="pcrr8c-">$</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">cylc</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">lockserver</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">status</span>


   </div>
<!--l. 6149--><p class="indent" >   For detailed usage information, <!--l. 6150--><div class="lstlisting">
<span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x20-470004r1"></a></span><span 
class="pcrr7t-">shell</span><span 
class="pcrr8c-">$</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">cylc</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">lockserver</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">--</span><span 
class="pcrr7t-">help</span>


   </div>
<!--l. 6154--><p class="indent" >   There is a command line client interface, <!--l. 6155--><div class="lstlisting">
<span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x20-470005r1"></a></span><span 
class="pcrr7t-">shell</span><span 
class="pcrr8c-">$</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">cylc</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">lockclient</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">--</span><span 
class="pcrr7t-">help</span>


   </div>
<!--l. 6158--><p class="indent" >   for interrogating the lockserver and managing locks manually (e.g.&#x00A0;releasing locks if a suite was killed before it
could clean up after itself).
<!--l. 6162--><p class="indent" >   To watch suite locks being acquired and released as a suite runs, <!--l. 6163--><div class="lstlisting">
<span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x20-470006r1"></a></span><span 
class="pcrr7t-">shell</span><span 
class="pcrr8c-">$</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">watch</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">cylc</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">lockclient</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">--</span><span 
class="pcrr7t-">print</span>


   </div>
                                                                                         

                                                                                         
   <!--l. 6167--><div class="crosslinks"><p class="noindent">[<a 
href="cug-htmlse20.html" >next</a>] [<a 
href="cug-htmlse18.html" >prev</a>] [<a 
href="cug-htmlse18.html#tailcug-htmlse18.html" >prev-tail</a>] [<a 
href="cug-htmlse19.html" >front</a>] [<a 
href="cug-html.html#cug-htmlse19.html" >up</a>] </p></div>
<!--l. 6167--><p class="indent" >   <a 
 id="tailcug-htmlse19.html"></a>  
</body></html> 
